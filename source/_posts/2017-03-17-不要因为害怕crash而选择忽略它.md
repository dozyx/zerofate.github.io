---
title: 不要畏惧 Crash
tags:
  - android
date: 2017-03-17 15:37:22
categories: 笔记
---

> 不要因为恐惧crash而掩饰它（如大量的null check），而是充分思考，利用crash来发现问题，让代码更健壮

原文：[WHY YOUR APP SHOULD CRASH](http://jeroenmols.com/blog/2017/03/08/appcrash/)

​	出于对crash的恐惧，人们总是会使用各种方式来掩饰它，如null check，然后代码就变成了这样

```java
public void showPlayers(List<Player> soccerPlayers) {
  if (soccerPlayers == null || soccerPlayers.isEmpty()) return;

  // some awesome code here
}
```

​	甚至这样

```java
public void showPlayers(List<Player> soccerPlayers) {
  if (soccerPlayers == null) return;

  if (myRecyclerView == null) return;

  if (myRecyclerView.getAdapter() == null) return;

  // some awesome code here
}
```

​	无论需不需要，我们都添加了判断，如果`soccerPlayers`还在几个层级中被使用，那代码将更加不堪入目。

> 一个“无辜”的null判断，可能很容易地将一个更大、更根本的问题掩饰掉。

​	未处理的异常是有用的，因为：

+ 通过crash通过作者
+ 将问题凸显出来而不是默默的挂掉
+ 有trace来跟踪问题
+ 可以自动备份到crash报告



​	**实践建议**

+ 让程序的健壮性足以防备所有控制之外的输入
+ 确保程序入口点的数据完整性
+ 如果不确定某一个错误条件在哪里会发生，就假设它不会发生。测试将会验证它是否存在。
+ 如果一个方法无法在生产中被调用，或只能被调用一次，则抛出IllegalStateException。
+ 总是在通过充分测试后再推向用户









































