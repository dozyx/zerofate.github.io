---
title: attr 属性引用
tags:
  - android
date: 2017-01-04 15:37:22
categories: 笔记
---

?attr和?android:attr

[Difference between “?attr/” and “?android:attr/” in android](Difference between “?attr/” and “?android:attr/” in android)

**?attr/xyz** 

> Defines and refers to the value of an attribute which you have defined on your own in your application.
>
> 使用的是自定义的属性，**包括支持库中的属性**



**?android:attr/xyz**

> Refers to the values of an attribute which are already available in android built-in. More specifically, the ? implies an extra level of indirection. Think of it as dereferencing an attribute to fetch the resource it points to rather than referring to the attribute itself. 
>
> 使用的是android内置的属性

?attr是一种间接引用，通过引用属性来获取resource，而不是直接引用属性值。这样，可以根据应用的不同theme来作出改变。



?attr的用法

由于是调用的自己的属性，所以需要先声明属性

```xml
<declare-styleable name="Theme">  
  <attr name="customAttributeSize" format="reference|dimension">  
</declare-styleable>
```

然后添加到theme.xml中，并可以在style中使用，使用时**并不需要声明namespace**

```xml
<style name="MyAppTheme" parent="android:Theme.Holo">  
  ... 
  <item name="customAttributeSize">24dp</item>  
  ...  
</style>  
<style name="TextAppearance.Custom" parent="TextAppearance">  
  <item name="android:textSize">?attr/customAttributeSize</item>  
</style>  
```

如果 ?attr/ 引用的属性不在 theme 中，则程序会 crash。





