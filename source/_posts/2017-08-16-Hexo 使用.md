---
title: Hexo 使用
tags:
  - hexo
date: 2017-08-17 15:37:22
categories: 笔记
---

[hexo你的博客](http://ibruce.info/2013/11/22/hexo-your-blog/)

[手把手教你用Hexo+Github 搭建属于自己的博客](http://blog.csdn.net/gdutxiaoxu/article/details/53576018)

[hexo在github部署卡住的奇怪问题](http://www.wuliaole.com/post/the_lag_problem_for_hexo_deploying_on_github/)

[GitHub Pages + Hexo搭建博客](http://crazymilk.github.io/2015/12/28/GitHub-Pages-Hexo%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/#more)

> 具体搭建参照[官网文档](https://hexo.io/zh-cn/docs/)。

## 基本使用

### 写文章

[写作](https://hexo.io/zh-cn/docs/writing.html)

> $ hexo new [layout] \<title>

执行 new 命令即可在 `_post` 目录创建一篇文章，文章默认以 title 作为标题，但也可以编辑 _config.yml 中的 `new_post_name` 参数来改变默认的名称。

感到困扰的一个问题是创建的文章全部在 `_post` 目录，没找到自动创建并放在子目录的方法，不过问题倒也不大，因为文章包含了分类和标签，新建文章后，Mac 下直接使用 Alfred 打开还是很方便的。



### 添加多标签

YAML 语法：

> tags:
>
> - foo
> - bar

#### 草稿

发现草稿功能，这正是我之前不将文章放到网上的原因啊。。。

在创建文章时将 layout 指定为 draft，这样文章将被放置在 `source/_drafts` 中，草稿默认不会显示在页面中。

如果需要将草稿转为发布，则可以执行

> $ hexo publish [layout] \<title>

这样，草稿将移动到 source/_posts



#### 模板(Scaffold)

在新建文章时，Hexo 可以根据 `scaffolds` 文件夹内相对应的文件来建立文件，如

> $ hexo new photo "My Gallery"

执行这个指令时，Hexo 会尝试在 scaffolds 文件夹中寻找 photo.md，并根据其内容创建文章。

一开始想利用模板来自动生成分类 `categories:` ，不过修改后一直报错没成功，尝试了很久之后才发现，是因为typora 问题，估计是 typora 在使用 md 语法时添加了一些额外的字符，坑。

如果想要创建带图片的文章则可以创建一个 photo.md 的文件，将内容改为

```yaml
layout: { { layout } }
title: { { title } }
date: { { date } }
tags: 
photos: 
- 
---
```

这样，在创建的文章中直接填入 photo 链接即可。



### 应用主题(以 NexT 为例)

[NexT 地址](http://theme-next.iissnan.com/getting-started.html)，建议以 Git 来下载

首先，将主题下载放到 themes 文件夹

> git clone https://github.com/iissnan/hexo-theme-next themes/next

然后，打开 _config.yml 文件，将 `theme` 字段改为 next，这样主题就安装完成了。

最后，验证前先使用 hexo clean 来清除缓存，重新打开 http://localhost:4000 就可看到主题效果。需要注意的是，如果之前已经使用 `hexo s` 启动服务的话，需要关闭再重新打开。

NexT 提供了多个主题：Muse、Mist、Pisces、Gemini，可以在主题的 `_config.yml`  文件中修改对应的scheme 即可（NexT 只要去掉对应主题的 # 注释即可）。主题修改后刷新页面就可以看到结果。



#### 修改语言

默认的 hexo 没有指定语言，可以在 `_config.yml` 中修改 language 字段，具体的值可以看主题的 languages 提供了哪些语言。

需要注意，值与 `：` 之前需要有个空格。



> NexT 还提供了「菜单」、「侧栏」、「头像」等设置，可以参照来定制自己的页面。具体查看官方网站，网站上已经讲得很详细，没必要再复述一遍了。



#### 添加 Github 等社交链接

将主题配置文件中的 social 字段注释去掉，然后按「网站名:地址」格式填写，网站名可以参考下面的图标名。



### 将博客部署到 Github

首先，需要修改 _config.yml 文件的 deploy 部分，type 为 git，repo 为 github 仓库地址，还可以设置部署到的 branch。

然后，安装 [hexo-deployer-git](https://github.com/hexojs/hexo-deployer-git)

> $ npm install hexo-deployer-git --save

使用 hexo 部署应该需要使用 git config 配置自己账户的并在本地添加 key 的，不过我的之前已经配置过，就没有重新尝试。

在执行上面的 git 部署安装命令时，一直失败，提示“no such file or directory, open '……/package.json'”，多次搜索后无果，最后看了下该路径的确没这个文件，才想起自己按照知乎的一个回答，想要将 hexo 文件与部署文件分离，创建了两个分支，而 package.json 是 hexo init 时生成的文件，所以需要切换到另一个分支进行。

deployer 成功安装后，执行

> hexo generate
>
> hexo deploy

这两个命令也可以合为一个，下面两个作用相同

> $ hexo generate --deploy
> $ hexo deploy --generate

简写

> $ hexo g -d
> $ hexo d -g

即可一键将网站部署到服务器上。hexo 的一个强大地方在于，它还可以同时部署多个服务器，比如同时部署到 github 和 coding.net。因为 github 的私密仓库是收费的，所以我们可以在 coding.net 也创建一份，那么就可以实现比如隐藏自己 MD 原始文件的功能。

部署完成后，即可通过「用户名.github.io」来查看自己的博客。

一开始耍了个小聪明，因为之前用 jeklly + github page 搭建过一个博客，现在是重新使用 hexo 搭建，本以为hexo 仓库的名称可以与用户名不一样，结果到最后试了很久都没把网页刷出来。其实想一想也知道，仓库名如果可以任意的话，名字太容易重复了，这怎么可能嘛。



#### 为 github.io 绑定域名

新建一个 CNAME 文件，内容为自己的域名。

> hexo g -d

重新部署完即可。



### 高级功能

#### 添加阅读量统计

[为NexT主题添加文章阅读量统计功能](https://notes.wanghao.work/2015-10-21-%E4%B8%BANexT%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0%E6%96%87%E7%AB%A0%E9%98%85%E8%AF%BB%E9%87%8F%E7%BB%9F%E8%AE%A1%E5%8A%9F%E8%83%BD.html#%E9%85%8D%E7%BD%AELeanCloud)



#### 添加搜索

[hexo高阶教程：教你怎么让你的hexo博客在搜索引擎中排第一](https://juejin.im/post/590b451a0ce46300588c43a0) (这篇文章除了搜索配置外还提到了许多其他内容，非常值得看)

> Google 验证站点时使用 HTML 标签验证得到数据，然后在主题配置文件中添加字段：
>
> google-site-verification: [相应的标签内容]
>
> baidu_site_verification: 
>
> 但是，我弄了好久都没配置成功，然后我干脆直接在 github 上编辑表示首页的 index.html ，在 header 中添加一个 meta 标签，然后一下子就成功了。。。



#### 添加字数统计

修改主题配置文件：

```yaml
post_wordcount:
  item_text: true
  wordcount: true
  min2read: true
```



### 使用问题汇总

#### 反斜杠无效

有时候在插入某个字符时会自动转为 markdown 语法，但某些情况下并不需要，一般我们会通过反斜杠来实现，不过实际使用中发现 Hexo 会在生成的文章中保留反斜杠。。。无奈。。。

为此，hexo 提供的另一个方法是使用标签：

```
{% raw %}
content
{% endraw %}
```

还有一种方式是使用 markdown 的块代码也可以保留原来字符，似乎代码块中的内容是无法使用 markdown 语法的。



#### 关于配置文件

在配置文件中，含有一个网站的密钥信息，所以最好不要传到 github 上，不过，这样在更换电脑后配置会不会不太方便？



#### 首页文章跳转错乱

突然隔了十几天重新上传文章后，奇怪的发现所有文章都跳到了同一篇文章。。。搞了很久才发现自己在配置文件中 permalink 是这样的：

```yml
permalink: title.html
```

这个属性好像是设置文章链接生成格式。。。不知道之前为什么抽筋漏了个冒号。。。最后改成了如下格式：

```yml
permalink: :year/:month/:day/:title.html
```



## 总结

> 2017-08-16

之前一直将文章放在 onedrive 上，也相当于本地使用而已。之前已经折腾过 jeklly，但当时觉得很多自己写的东西都远远不到满意的程度，并且也有很多只是以想法存在而已，所以不想放到网上。不过，趁着现在失业期间，是时候改变下了，我需要向别人证明我的努力和优秀。

使用 jeklly 首先感到的第一个方便的地方就是文章标题可以自动配置生成了，之前用 onedrive 都是手敲。。。笨。。。