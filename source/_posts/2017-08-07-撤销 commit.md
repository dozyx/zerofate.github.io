---
title: git 撤销
tags:
  - git
date: 2017-08-07 15:37:22
categories: 笔记
---

[Rolling back local and remote git repository by 1 commit](https://stackoverflow.com/questions/4647301/rolling-back-local-and-remote-git-repository-by-1-commit)

[Git的撤消操作 - 重置, 签出 和 撤消](http://gitbook.liuhui998.com/4_9.html)

### 情景：已提交到远程服务器，需要撤销此次修改

如果还没有其他人从远程仓库中 pull，则可以执行

> git reset --hard HEAD^ 
> git push -f 

`git reset --hard HEAD^` 的意思是，让工作目录回到**上上次**提交时的状态，工作目录所有未提交的内容将被清空，但不包括未加入版本控制中的 untracked 的文件。 `git push -f` 将强制 push，push 成功后，上次的 commit 将被清除。

假如已经有人对仓库进行了 pull 操作，那么最后使用 revert 来解决，git revert 不会重写历史记录。

+ 先使用 `git revert` 将本地内容恢复到错误 commit 之前，这将创建一个新的 commit
+ push 还原后的版本

如：

撤销最近一次提交

> $ git revert HEAD

撤销上上次提交

> $ git revert HEAD^

注意：执行完 git revert 后，仍需要执行 git commit 才能创建提交。