---
title: LruCache
tags:
  - android
  - 性能
date: 2017-05-03 15:37:22
categories: 笔记
---

[LruCache](https://developer.android.com/reference/android/util/LruCache.html)

[Android中使用的LruCache](http://www.jianshu.com/p/f32e5d435d6c)

java.lang.Object
   ↳	android.util.LruCache\<K, V\>

------

​	LRU，是Least Recently Used的缩写。

​	LruCache 是一个缓存机制，它持有对有限数量的值的强引用。每一次值的使用，都会将该值移动到队列头，而当一个值被添加到一个已满的缓存的时候，位于队尾的值会被移出并可能被GC回收。

​	如果需要手动释放缓存值的资源，可重写` entryRemoved(boolean, K, V, V)`。

​	默认地，缓存大小根据项目的数量进行计算，重写`sizeOf(K, V)`可以确定各个单元的缓存大小。如，将缓存限制为4MiB的bitmap：

```java
   int cacheSize = 4 * 1024 * 1024; // 4MiB
   LruCache<String, Bitmap> bitmapCache = new LruCache<String, Bitmap>(cacheSize) {
       protected int sizeOf(String key, Bitmap value) {
           return value.getByteCount();
       }
   }
```



