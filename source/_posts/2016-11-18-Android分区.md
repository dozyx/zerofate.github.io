---
title: Android 设备的分区
tags:
  - android
date: 2016-11-18 15:37:22
categories: 笔记
---

## 分区情况

参考

[Android Partitions: What they are and why they are needed?](http://donandroid.com/android-partitions-sdcard-boot-recovery-cache-data-system-misc-1043)

[Android partitions, kernels explained](http://androidforums.com/threads/android-partitions-kernels-explained.278898/)

标准内部内存分区

+ /boot：包含了用于android设备启动进程的文件。ramdisk和kernel也在此分区。boot分区被抹除后，仍可以通过recovery来启动设备。
+ /system：所有系统相关的文件被存放在此分区，其中包含了所有系统的应用。
+ /recovery：用于以recovery模式启动。当处于recovery模式时，可执行如清除data/userdata分区来恢复出厂设置和清除cache分区等功能。
+ /data：存放用户数据。包括所有的用户设置和个性化、下载和安装的app、短信和通讯录。清除此分区会将设备恢复到出厂设置，将移除所有的app、短信和用户设置。
+ /cache：存放日志和频繁访问的app数据。清除此分区对android设备无影响，只是释放一些空间。
+ /misc：此分区包括各种各样（miscellaneous）的硬件设置。这些文件确保设备的功能正常。抹除此分区可能造成设备启动异常，甚至无法启动。

除此之外，还有外部分区

+ /sdcard：指向用户可用于存放个人文件和数据的空间。基于设备，可能会有多个sdcard分区。对于具有外部sd卡插槽的设备，/sdcard分区代表的是内部存储设备。对于外部的sd卡，可能会有一个不一样的分区/sdcard2或者是一个sdcard分区下的目录如/sdcard/sd。因为此分区没有系统数据，所以抹除此分区是安全的。抹除/sdcard分区只会抹除app的设置和用户数据，绝不会阻断系统启动进程或者功能。
+ /sd-ext：sdcard分区的额外分区，通常用于自定义ROM和模式。作用相当与是在/sdcard分区的/data分区，保存那些一般存放在/data分区的用户数据和设置。此分区有助于内部存储空间有限的设备。

## 如何查看

参考

[Android如何查看分区情况](http://blog.csdn.net/isesar/article/details/19160915)

 [如何查看Android设备上的分区信息](http://blog.csdn.net/roland_sun/article/details/50969958)

Android设备上，一般都会存在一块eMMC存储芯片来存放系统和用户数据，甚至部分的引导程序。一般出厂时，各个厂商会将这块存储芯片分成很多的分区。

Mi5设备：

查看系统中有多少分区：major为主设备号，minor为次设备号

> cat /proc/partitions

![android分区1](photo\分区\android分区1.png)

查看当前系统中所有设备的主设备号

> cat /proc/devices

![android分区2](photo\分区\android分区2.png)

使用df命令查看每个挂载到文件系统上的分区大小和使用情况

![android分区3](photo\分区\android分区3.png)

在adb shell下使用linux命令：

> ls -l /dev/block 查看块设备列表
>
> ls -l /dev/block/platform/[sdhci-tegra.3]/by-name	查看各分区名称，[sdhci-tegra.3]视具体设备而定
>
> cat /sys/class/block/mmcblk0p1/size 查看各分区容量，显示单位为records，1records=512byte
>
> cat /proc/partitions 查看各分区容量，显示单位是blocks，1blocks=1K
>
> cat /etc/fstab或df -ah或cat /proc/mounts 查看格式和挂载

此外，如果有源代码，可以通过查看fsconfig.xml获取分区信息。



