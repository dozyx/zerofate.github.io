---
title: Kotlin - 开始
tags:
  - kotlin
date: 2017-06-14 15:37:22
categories: 笔记
---

[Get Started with Kotlin on Android](https://developer.android.com/kotlin/get-started.html)

[Resources to Learn Kotlin](https://developer.android.com/kotlin/resources.html)

​	Android Studio 从 3.0 开始，将对 Kotlin 提供完全支持。

## 创建 Kotlin 项目

<img src="https://ws3.sinaimg.cn/large/006tKfTcgy1fimwlzn1nwj318g11ctc2.jpg" style="zoom:30%"/>

区别只在于“**Include Kotlin support**” 

## 在已有的 Project 中加入 Kotlin

既可以将 **Source Language** 设为 Kotlin，也可以直接 **File > New > Kotlin File/Class** 创建

<img src="https://ws2.sinaimg.cn/large/006tKfTcgy1fimwm12p7yj318m1diwpz.jpg" style="zoom:50%" />

<img src="https://ws3.sinaimg.cn/large/006tKfTcgy1fimwm26w2hj318g11cwic.jpg" style="zoom:50%" />

### 修改 Kotlin 源文件目录

​	默认地，Kotlin 文件保存到 src/main/java，如果想要将 Kotlin 文件与 java 文件区分开来，可以将 Kotlin 文件放在 src/main/kotlin 目录。这需要我们对 [sourceSets](https://developer.android.com/studio/build/index.html#sourcesets) 进行配置

```groovy
android {
   sourceSets {
       main.java.srcDirs += 'src/main/kotlin'
   }
}
```



## 将已有 Java 代码转为 Kotlin 代码

​	在 Android Studio 3.0 中，打开 Java 文件并选择 **Code > Convert Java File to Kotlin File**，或者，创建一个新的 Kotlin 文件，然后将 Java 代码复制进去，弹出提示时，点击 “yes” 进行转换。



## Kotlin 使用 Android APIs



### 示例1：声明 Activity

Kotlin

```kotlin
class MyActivity : AppCompatActivity() {
  override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)
    setContentView(R.layout.activity)
  }
}
```

Java

```java
public class MyActivity extends AppCompatActivity {
  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity);
  }
}
```



### 示例2：On-click 监听器

Kotlin

```kotlin
val fab = findViewById(R.id.fab) as FloatingActionButton
fab.setOnClickListener {
  ...
}
```

Java

```Java
FloatingActionButton fab = (FloatingActionButton) findViewById(R.id.fab);
fab.setOnClickListener(new View.OnClickListener() {
  @Override
  public void onClick(View view) {
    ...
  }
});
```

### 示例3：item click 监听器

Kotlin

```kotlin
private val mOnNavigationItemSelectedListener
    = BottomNavigationView.OnNavigationItemSelectedListener { item ->
  when (item.itemId) {
    R.id.navigation_home -> {
      mTextMessage.setText(R.string.title_home)
      return@OnNavigationItemSelectedListener true
    }
    R.id.navigation_dashboard -> {
      mTextMessage.setText(R.string.title_dashboard)
      return@OnNavigationItemSelectedListener true
    }
 }
 false
}
```

Java

```java
private BottomNavigationView.OnNavigationItemSelectedListener mOnNavigationItemSelectedListener
    = new BottomNavigationView.OnNavigationItemSelectedListener() {
  @Override
  public boolean onNavigationItemSelected(@NonNull MenuItem item) {
    switch (item.getItemId()) {
      case R.id.navigation_home:
        mTextMessage.setText(R.string.title_home);
        return true;
      case R.id.navigation_dashboard:
        mTextMessage.setText(R.string.title_dashboard);
        return true;
    }
    return false;
  }
};
```



## Kotlin 学习资源

[Kotlinlang.org](https://kotlinlang.org/) 官网，包括[基本语法](https://kotlinlang.org/docs/reference/basic-syntax.html)和 [Kotlin 标准库](https://kotlinlang.org/api/latest/jvm/stdlib/index.html)

[Kotlin Koans Online](http://try.kotlinlang.org/) 在线 IDE 练习，用于学习 Kotlin 语法

